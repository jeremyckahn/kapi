
<!DOCTYPE html>
 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">    
 
    <head> 
 
 
	<!-- Title --> 
	<title></title> 
	
	<link rel = "stylesheet" type = "text/css" href = "css/style.css" /> 
	
	<!-- JavaScript includes --> 
	
	<script type="text/javascript" src="js/jquery.js"></script> 
	<script type="text/javascript" src="js/kapi.js"></script> 
	<script type="text/javascript" src="js/kapi.tweens.js"></script> 
	<script type="text/javascript" src="js/shapes.js"></script> 
	
	<script type="text/javascript" src="js/syntaxhighlighter/scripts/shCore.js"></script> 
	<script type="text/javascript" src="js/syntaxhighlighter/scripts/shBrushJScript.js"></script> 
	
	<script type="text/javascript" src="js/demo_runner.js"></script>
	
	<link type="text/css" rel="stylesheet" href="js/syntaxhighlighter/styles/shCoreDefault.css"/>
    
	<!-- Meta tags --> 
	<meta name="description" content="" /> 
	<meta name="keywords" content="" /> 
	<meta name="author" content="" /> 
 
	</head> 
  
	<body class="api"> 
		<div class="container">
	 		<h1>Kapi</h1>

			<h3>A keyframing API for the HTML 5 canvas</h3>
			
			<h4>A JavaScript framework by <a href="http://www.jeremyckahn.com" target="_blank">Jeremy Kahn</a></h4>
			
			<ul>
				<li><a href="https://github.com/jeremyckahn/kapi" target="_blank">Github repo</a> - fork 'n follow!</li>
				<li><a href="index.html">Main page</a></li>
				<li><a href="actor_doc.html">Actor object reference</a></li>
			</ul>
			
			<h2>Kapi constructor</h2>
			
			<a name="kapi"></a>
			<h3>kapi()</h3>
			
			<pre class="func-def">kapi( canvas, params, events )</pre>
			
			<h5>canvas:</h5>
			
			<p>This is a reference to your canvas on the DOM.</p>
			
			<h5>params:</h5>
			
			<p>Optional parameters you may pass to the kapi instance.  You can pass:</p>
			
			<ul class="params">
				<li><strong>fRate:</strong>String or number.  The frame rate that Kapi refreshes at.  60 is the limit of human perception, and 12 is choppy.  A happy medium is between 20 and 30.</li>
				<li><strong>styles:</strong>Object.  CSS styles to be set upon <code>canvas</code>.</li>
				<li><strong>autoclear:</strong>Controls whether or not the <code>canvas</code> is cleared out after each frame is rendered.  This is <code>true</code> by default.</li>
			</ul>
			
			<h5>events:</h5>
			
			<p>An object containing events that can be set on this instance of Kapi.  Supply event handlers as functions.  Available events:</p>
			
			<ul class="params">
				<li><strong>enterFrame:</strong>This event fires each time a new frame is processed, before it is rendered.</li>
			</ul>
			
			<div class="ret"><strong>Returns:</strong> An instance of kapi.</div>
			
			<h2>Kapi instance methods</h2>
			
			
			<a name="getversion"></a>
			<h3>getVersion()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.getVersion()</pre>
			
			<div class="ret"><strong>Returns:</strong> String.  The version of Kapi you are using.</div>
			
			
			<a name="isplaying"></a>
			<h3>isPlaying()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.isPlaying()</pre>
			
			<div class="ret"><strong>Returns:</strong> Boolean.  Whether or not the animation is playing (meaning not paused or stopped).</div>
			
			
			<a name="play"></a>
			<h3>play()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.play()</pre>
			
			<p>Starts the animation if it was not running before, or resumes the animation if it was not running previously.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="pause"></a>
			<h3>pause()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.pause()</pre>
			
			<p>Freeze the animation at its current state.  Resuming from the paused state does not start the animation from the beginning, the state of the animation is maintained.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="stop"></a>
			<h3>stop()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.stop()</pre>
			
			<p>Stops the animation.  When the animation is started again with <code>play()</code>, it starts from the beginning of the loop.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="repeat"></a>
			<h3>repeat()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.repeat( repetitions )</pre>
			
			<p>Play the animation for set amount of repetitions.  After starting over the specified amount of times, the animation will <code>stop()</code>.</p>
			
			<h5>repetitions:</h5>
			
			<p>A number.  The number of times to start over.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="iterate"></a>
			<h3>iterate()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.iterate( iterations )</pre>
			
			<p>Play the animation And let it run for a set amount of iterations.  After running over the specified amount of times, the animation will <code>stop()</code>.  This is extremely similar to the functionality of <code>kapiInstance.repeat()</code>, but the parameter controls how many times the animation runs for, not how many times it starts over.</p>
			
			<h5>iterations:</h5>
			
			<p>A number.  The number of times to run for.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="add"></a>
			<h3>add()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.add( actor, initialState )</pre>
			
			<p>Add an actor to the animation.  Importantly, this method returns a reference to the actor that it added to the Kapi instance.</p>
			
			<h5>actor:</h5>
			
			<p>A function or object.</p>
			
			<p><strong>If you are passing a function:</strong>  Logically, this function should draw something to the canvas.  All actor functions access their state properties with the <code>this</code> JavaScript keyword.  Actor functions get a reference to the canvas's <code>context</code> as the first parameter.  Here's an example of an actor:</p>
			
			<pre class="brush: js;">
function circle(ctx){
	ctx.beginPath();
	ctx.arc(
		this.x || 0,
		this.y || 0,
		this.radius || 0,
		0,
		Math.PI*2, 
		true
		);
	ctx.fillStyle = this.color || '#f0f';
	ctx.fill();
	ctx.closePath();

	return this;
}</pre>
			
			<p><strong>If you are passing an Object:</strong> You can pass an object with any number of the following properties:</p>
			
			<ul>
				<li><strong>draw:</strong> This is required.  This defines the drawing logic for the actor.  This is actually the same function that you would pass as the first parameter to <code>kapi.add()</code>, so the same rules apply.</li>
				<li><strong>setup:</strong> This is called once the actor is added to Kapi. Handy for any actor initialization logic.</li>
				<li><strong>teardown:</strong> This is called after the actor is removed from the Kapi instance (with <code>kapi.removeActor()</code>).  Note:  This functionality does not exist as of v0.2.1, <a href="https://github.com/jeremyckahn/kapi/issues#issue/27" target="_blank">it will be added in the future</a>.</li>
			</ul>
			
			<p>Here's a example of an actor similar to the previous example, but as an object with <code>setup</code> and <code>teardown</code> methods: 
			<pre class="brush: js;">
var circle = {
	setup: function () {
		if (console) {
			console.log('Setting up ', this)
		}
	},
	draw: function (ctx){
		ctx.beginPath();
		ctx.arc(
			this.x || 0,
			this.y || 0,
			this.radius || 0,
			0,
			Math.PI*2, 
			true
			);
		ctx.fillStyle = this.color || '#f0f';
		ctx.fill();
		ctx.closePath();

		return this;
	},
	teardown: function () {
		if (console) {
			console.log('Tearing down ', this)
		}
	}
}</pre>
			
			<h5>initialState:</h5>
			
			<p>An object defining the initial state for the actor.  If an actor uses a property in any of its keyframes, it must be present in this object.  Note:  If the <code>name</code> property is not provided, it is added automatically.</p>
			
			<pre class="brush: js;">
myKapi = kapi(document.getElementsByTagName('canvas')[0]);

myCircle = myKapi.add(circle, {
	name: 	myCircle,
	x: 		70,
	y: 		70,
	radius: 50,
	color: 	'#00ffaa',
	easing: 'easeInOutQuint'
});</pre>
			
			<div class="ret"><strong>Returns:</strong> A reference to the actor that was added to Kapi.</div>
			
			
			<a name="removeactor"></a>
			<h3>removeActor()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.removeActor( actorName )</pre>
			
			<p>Completely removes an actor from the animation.  This also removes all keyframes for the removed actor.  This method calls the actor's <code>teardown</code> method, if one was defined when the actor was <code><a href="#add">add</a></code>ed.</p>
			
			<h5>actorName:</h5>
			
			<p>A string.  The name of the actor to be removed.</p>
			
			<div class="ret"><strong>Returns:</strong>The Kapi object (for chaining).</div>
			
			
			<a name="gotoframe"></a>
			<h3>gotoFrame()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.gotoFrame( frame )</pre>
			
			<p>Go to a specific frame in the animation.  You can go to any frame, it doesn't have to be a keyframe.</p>
			
			<h5>frame:</h5>
			
			<p>A keyframe identifier (integer, <code>"{number}s"</code> or <code>"{number}ms"</code>) specifying which frame to go to and render.  Specify an integer if you know exactly what frame you want to go to.  If you want to go to a frame that exists at a specific amount of time into the animation, pass a string in the <code>"{number}s"</code> or <code>"{number}ms"</code> formats.  <code>"{number}s"</code> is seconds, <code>"{number}ms"</code> is milliseconds.</p>
			
			<pre class="brush: js;">
myKapi.gotoFrame('1.5s');</pre>
			
			<p>This will go to and render the frame that exists 1.5 seconds into the animation.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="gotoandplay"></a>
			<h3>gotoAndPlay()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.gotoAndPlay( frame )</pre>
			
			<p>Works exactly like <code>gotoFrame()</code>, but has the added benefit of also playing the animation.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="getstate"></a>
			<h3>getState()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.getState()</pre>
			
			<p>Gets the current state of all of the actors in the animation as an object.</p>
			
			<div class="ret"><strong>Returns:</strong> An object.</div>
			
			
			<a name="getnumberoflayers"></a>
			<h3>getNumberOfLayers()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.getNumberOfLayers()</pre>
			
			<p>Gets the number of layers currently in the Kapi instance.  Note:  This is also the same as the number of actors in the animation.</p>
			
			<div class="ret"><strong>Returns:</strong> A number.</div>
			
			
			<a name="getactor"></a>
			<h3>getActor()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.getActor( actorName )</pre>
			
			<p>Get a specific actor object.</p>
			
			<h5>actorName:</h5>
			
			<p>A string representing the name of the actor to fetch.</p>
			
			<div class="ret"><strong>Returns:</strong>An actor object.</div>
			
			
			<a name="getactorlist"></a>
			<h3>getActorList()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.getActorList()</pre>
			
			<p>Returns a list of all the actors currently registered with this Kapi instance.</p>
			
			<div class="ret"><strong>Returns:</strong> An Array of all the string names of the actors that can be accessed with <code>kapi.getActor()</code>.</div>
			
			
			<a name="removeallkeyframes"></a>
			<h3>removeAllKeyframes()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.removeAllKeyframes()</pre>
			
			<p>Remove all of the keyframes for all of the actors in the animation.  Aside from the fact that <code>add</code>ed actors are still available in the Kapi instance, this effectively resets the state of Kapi.</p>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="framerate"></a>
			<h3>framerate()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.framerate( newFramerate )</pre>
			
			<p>Gets or sets the framerate that Kapi updates at.  The current framerate is always returned, but if an argument is specified, Kapi's framerate is set to that number.</p>
			
			<h5>newFramerate:</h5>
			
			<p>The new framerate to set.</p>
			
			<div class="ret"><strong>Returns:</strong>The current framerate.  If <code>newFramerate</code> is an integer and greater than 0, this number is the same as <code>newFramerate</code>.</div>
			
			
			<a name="bind"></a>
			<h3>bind()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.bind( eventName, handler )</pre>
			
			<p>Bind an event handler to a Kapi event.  Throughout the course of its execution, Kapi fires events at verious key points.  You can attach an event handler that gets invoked when these events fire.  You can attach as many event handlers to an event as you'd like; event handlers are invoked in the order they are attached.</p>  
			<p>Event handlers are invoked in the context of the Kapi instance.  This means the <code>this</code> keyword is a reference to the Kapi object.</p>
			
			<p>You can bind event handlers to the following events:</p>
			
			<ul>
				<li><code>enterFrame</code>: Fires at the beginning of every frame.</li>
				<li><code>loopStart</code>: Fires once per loop, at the beginning of the loop.</li>
				<li><code>loopComplete</code>: Fires once per loop, at the end of the loop.</li>
			</ul>
			
			<h5>eventName:</h5>
			
			<p>A string.  The name of the event to bind an event handler to.</p>
			
			<h5>handler:</h5>
			
			<p>A function.  The event handler to attach.</p>
			
			<pre class="brush: js;">
function myHandler () {
	console.log('Hello there.');
}

var demo = kapi(document.getElementById('myCanvas'));

demo.bind('enterFrame', myHandler);
</pre>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
			
			<a name="unbind"></a>
			<h3>unbind()</h3>
			
			<pre class="func-def"><em>kapiInstance</em>.unbind( eventName, handler )</pre>
			
			<p>Remove an event handler from the Kapi instance.  You can either remove a specific handler from the event, or all of them - this is determined by the presence of the <code>handler</code> parameter.  If present, this method will only unbind the specified event handler.  If the <code>handler</code> parameter is omitted, all of the event handlers for this event are unbound.  Valid event names are the same as those listed in <a href="#bind"><code>.bind()</code></a>.</p>
			
			<h5>eventName:</h5>
			
			<p>A string.  The name of the event to unbind an event handler from.</p>
			
			<h5>handler:</h5>
			
			<p>A function.  A reference to the handler function to unbind.</p>
			
			<pre class="brush: js;">
function myHandler () {
	console.log('Hello there.');
}
				
var demo = kapi(document.getElementById('myCanvas'));

demo
	.bind('enterFrame', myHandler)
	.unbind('enterFrame', myHandler);
</pre>
			
			<div class="ret"><strong>Returns:</strong> The Kapi object (for chaining).</div>
			
		</div>
		
    </body> 
 
</html>