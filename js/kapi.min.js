/**
 * Kapi - A keyframe API
 * v1.0.4
 * by Jeremy Kahn - jeremyckahn@gmail.com
 * Maintained at: https://github.com/jeremyckahn/kapi
 * 
 * Kapi streamlines animation development for the HTML 5 canvas by providing a keyframing API.  It manages timing and tweening so you don't have to.   
 * 
 * Kapi is distributed under the MIT license.
 * Learn more about keyframes: http://en.wikipedia.org/wiki/Key_frame
 *
 * This file also includes `kapi.tweens.js`
 * They were written by Robert Penner, copied under BSD License (http://www.robertpenner.com/)
 * 
 * Please use, distribute and enjoy.
 */

function kapi(b,f,d){function h(a,c,i){var b;if(!c)return a;a=a||{};for(b in c)if(c.hasOwnProperty(b))if(typeof c[b]==="object"&&b!=="prototype"){if(!a[b]||i)a[b]=R.call(c[b])==="[object Array]"?[]:{};h(a[b],c[b],i)}else if(typeof a[b]==="undefined"||i)a[b]=c[b];return h(a,void 0,i)}function H(g,c,b,e,o,h){if((h||a._currentFrame)>=c)return typeof h==="undefined"?kapi.tween[g](a._currentFrame-c,e,o-e,b-c||1):kapi.tween[g](h-c,e,o-e,b-c||1)}function y(a){return a.length>0?a[a.length-1]:void 0}function I(g){this[g]=
this.style[g].replace(/px/gi,"")||a._params[g]}function J(a){return a.sort(function(a,g){return a-g})}function B(a){return typeof a==="string"&&(/^#([0-9]|[a-f]){3}$/i.test(a)||/^#([0-9]|[a-f]){6}$/i.test(a))}function z(a){return typeof a==="string"&&/^rgb\(\d+\s*,\d+\s*,\d+\s*\)\s*$/i.test(a)}function C(a){return parseInt(a,16)}function K(a){return typeof a==="string"?(a=a.replace(/#/g,""),a.length===3&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),[C(a.substr(0,2)),C(a.substr(2,2)),C(a.substr(4,2))]):[0,0,
0]}function L(a){if(typeof a!=="string")return a;return/^(#|rgb)/.test(a)?/^#/.test(a)?K(a):(a=a.match(/\d+/g),[+a[0],+a[1],+a[2]]):a}function w(a){return typeof a==="string"&&/^\s*(\+|\-|\*|\/)\=/.test(a)||typeof a==="function"}function t(a){var c;if(typeof a==="number")return parseInt(a,10);else if(typeof a==="string"){a=a.replace(/\s/g,"");c=/^(\d|\.)+/.exec(a)[0];a=/\D+$/.exec(a);if(!a)return parseInt(c,10);if(M[a])c=parseInt(M[a].call(this,c),10);else throw"Invalid keyframe identifier unit!";
return c}else throw"Invalid keyframe identifier type!";}function N(){var g;for(g=0;g<a._layerIndex.length;g++)a._actors[a._layerIndex[g]].params.layer=g}function D(){a._lastKeyframe=y(a._keyframeIds);a._animationDuration=1E3*(a._lastKeyframe/a._params.fps)}function x(g){var c;if(a._currentFrame===0)return 0;if(a._currentFrame>g[g.length-1])return-1;for(c=g.length-1;c>=0;c--)if(g[c]<a._currentFrame)return c;return g.length-1}function S(g){g.keyframe=function(c,b){var e,o;for(e in b)if(b.hasOwnProperty(e)&&
typeof b[e]==="string"&&b[e]===(o=+b[e].replace(E,"")).toString())b[e]=o;e=h({},b);try{c=t(c)}catch(d){window.console&&window.console.error&&console.error(d);return}if(c<0)throw"Keyframe "+c+" is less than zero!";c>0&&typeof a._keyframes["0"]==="undefined"&&(a._keyframes["0"]={},a._keyframeIds.unshift(0));typeof a._keyframes[c]==="undefined"&&(a._keyframes[c]={});typeof a._originalStates[c]==="undefined"&&(a._originalStates[c]={});a._keyframes[c][g.id]=b;a._originalStates[c][g.id]=e;e=c;a:{for(o=
0;o<a._keyframeIds.length;o++)if(a._keyframeIds[o]===e)break a;a._keyframeIds.push(e);J(a._keyframeIds)}e={add:e};o=a._actorstateIndex[g.id];var f=!1,l;if(typeof e.add!=="undefined"){for(l=0;l<o.length;l++)o[l]===e.add&&(f=!0);f||(o.push(e.add),J(o))}e=g.id;for(var j,k,m,q,F,f=0;f<a._actorstateIndex[e].length;f++){o=a._actorstateIndex[e][f];j=typeof j==="undefined"?h({},a._actors[e].params):h({},k);l=h(j,a._originalStates[o][e],!0);l.prototype=a._actors[e];a._keyframes[o][e]=l;for(m in l)if(l.hasOwnProperty(m)&&
typeof l[m]==="string")if(k&&(F=k[m]),q=l[m].replace(/\s/g,""),B(q)||z(q)){j=l;var n=m;var s=void 0;z(q)||(s=K(q),q="rgb("+s[0]+","+s[1]+","+s[2]+")");j[n]=q}else k&&F&&w(F)&&typeof a._originalStates[o][e][m]==="undefined"&&(l[m]="+=0");j=o;k=l}var u,p;for(p in a._liveCopies)if(a._liveCopies.hasOwnProperty(p))for(u in k=a._liveCopies[p],k)k.hasOwnProperty(u)&&(a._keyframes[u][p]=a._keyframes[a._liveCopies[p][u].copyOf][p]);N();delete b.layer;D();return this};g.to=function(c,b,e){var o=a._actorstateIndex[g.id].queue;
o.push({duration:t(c),state:b||{},events:e||{}});c=y(o);c._internals={};c._internals.startTime=null;c._internals.fromState=null;c._internals.toState=null;c._internals.pauseBuffer=null;c._internals.pauseBufferUpdated=null;return this};g.clearQueue=function(){a._actorstateIndex[g.id].queue.length=1;return this};g.skipToEnd=function(){var c=a._actorstateIndex[g.id].queue;if(!c.length)return this;c[0]._internals.forceStop=!0;return this};g.endCurrentAction=function(){var c=a._actorstateIndex[g.id].queue;
if(!c.length)return this;c[0]._internals.toState=this.getState();this.skipToEnd();return this};g.remove=function(c){var b,e,o,h=!1,c=t(c);if(a._keyframes[c]&&a._keyframes[c][g.id]){delete a._keyframes[c][g.id];delete a._originalStates[c][g.id];for(b in a._keyframes[c])a._keyframes[c].hasOwnProperty(b)&&(h=!0);if(!h&&c!==0){delete a._keyframes[c];delete a._originalStates[c];for(b=0;b<a._keyframeIds.length;b++)if(a._keyframeIds[b]===c){a._keyframeIds.splice(b,1);break}for(b=0;b<a._reachedKeyframes.length;b++)if(a._reachedKeyframes[b]===
c){a._reachedKeyframes.splice(b,1);break}}for(b=0;b<a._actorstateIndex[g.id].length;b++)if(a._actorstateIndex[g.id][b]===c){a._actorstateIndex[g.id].splice(b,1);b<=a._actorstateIndex[g.id].reachedKeyframes.length&&a._actorstateIndex[g.id].reachedKeyframes.pop();break}a._liveCopies[g.id]&&a._liveCopies[g.id].hasOwnProperty(c)&&delete a._liveCopies[g.id][c];for(e in a._liveCopies[g.id])a._liveCopies[g.id].hasOwnProperty(e)&&a._liveCopies[g.id][e].copyOf===c&&(g.remove(e),o=!0);o||delete a._liveCopies[g.id];
D()}else console&&console.error&&(a._keyframes[c]?console.error("Trying to remove "+g.id+" from keyframe "+c+", but "+g.id+" does not exist at that keyframe."):console.error("Trying to remove "+g.id+" from keyframe "+c+", but keyframe "+c+" does not exist."));return this};g.removeAll=function(){for(var c=g.id;a._actorstateIndex[c]&&a._actorstateIndex[c].length;)a._actors[c].remove(y(a._actorstateIndex[c]));return this};g.updateKeyframe=function(c,b){var e,c=t(c);a._keyframes[c]&&a._keyframes[c][g.id]?
(e=a._originalStates[c][g.id],h(e,b,!0),g.keyframe(c,e)):window.console&&window.console.error&&(a._keyframes[c]?console.error("Keyframe "+c+" does not contain "+g.id):console.error("Keyframe "+c+" does not exist."));return this};g.liveCopy=function(c,b){c=t(c);b=t(b);a._keyframes[b]&&a._keyframes[b][g.id]?(a._liveCopies[g.id][c]={copyOf:b},g.keyframe(c,{})):window.console&&window.console.error&&(a._keyframes[b]?console.error("Trying to make a liveCopy of "+b+", but  "+g.id+" does not exist at keyframe "+
c+"."):console.error("Trying to make a liveCopy of "+b+", but keyframe "+b+" does not exist."));return this};g.getState=function(){return a._currentState[g.id]||{}};g.get=function(c){return c.toLowerCase()==="layer"?a._actors[g.id].params.layer:g.getState()[c]};g.moveToLayer=function(c){var b;if(typeof c!=="number")throw"moveToLayer requires a number specifying which layer to move "+this.id+" to.";c=parseInt(c,10);if(c>-1&&c<a._layerIndex.length)b=a._layerIndex.splice(g.params.layer,1)[0],a._layerIndex.splice(c,
0,b),N();else throw'"'+c+'" is out of bounds.  There are only '+a._layerIndex.length+" layers in the animation, "+g.id+" can only be moved to layers 0-"+a._layerIndex.length;return g};g.kapi=n;return g}function A(b){var c;if(typeof b==="string"&&a._events[b])for(c=0;c<a._events[b].length;c++)a._events[b][c].call(a)}function O(b,c,i,e,o,f){var d,l,j,k,m,q,n,v={},o=kapi.tween[o]?o:"linear",f=f||{};for(l in b)if(b.hasOwnProperty(l)){j=b[l];k=b.prototype.id;if(typeof j==="object"&&l!=="prototype")for(n in j)if(j.hasOwnProperty(n)){j=
j[n];break}if(typeof a._keyframeCache[k].from[l]!=="undefined")j=a._keyframeCache[k].from[l];else if(w(j)){j=b.prototype.id;d=l;var s=q=m=void 0,u=[],p=s=void 0,t=void 0,p=void 0;m=x(a._actorstateIndex[j]);q=a._actorstateIndex[j];for(p=m;p>=0;p--)s=a._keyframes[q[p]][j][d],u.unshift(s),w(s)||(p=-2);p>-2&&u.unshift(a._actors[j].params[d]);for(s=u.shift();u.length;)p=u.shift(),typeof p==="function"?s=p.call(a._keyframes[q[m]][j])||0:(t=p.match(/(\+|\-|\*|\/)\=/)[0],s=P[t](s,+p.replace(E,"")));j=s;a._keyframeCache[k].from[l]=
j}if(typeof j==="number"||w(j)||B(j)||z(j)){d=!1;k=c[l];m=c.prototype.id;if(typeof k==="object"&&l!=="prototype")for(n in k)if(k.hasOwnProperty(n)){o=kapi.tween[n]?n:"linear";k=k[n];break}typeof a._keyframeCache[m].to[l]!=="undefined"?k=a._keyframeCache[m].to[l]:w(k)&&(typeof k==="function"?k=k.call(c)||0:(q=k.match(/(\+|\-|\*|\/)\=/)[0],k=P[q](j,+k.replace(E,""))),a._keyframeCache[m].to[l]=k);m=typeof j;if(!(typeof k==="number"||w(k)||B(k)||z(k))||m!==typeof k)v[l]=j;else if(typeof j==="string"&&
(d=!0,j=L(j),k=L(k)),d){v[l]="rgb(";for(d=0;d<j.length;d++)v[l]+=Math.floor(H.call(this,o,i,e,j[d],k[d],f.currentFrame))+",";v[l]=v[l].replace(/,$/,")")}else v[l]=H.call(this,o,i,e,j,k,f.currentFrame)}}h(v,b);return v}function G(b){var c,i,e,d,f,r,l;for(l=0;l<a._layerIndex.length;l++){c=a._layerIndex[l];if(typeof a._actorstateIndex[c][0]!=="undefined"&&b>=a._actorstateIndex[c][0]){i=c;d=a._actorstateIndex[i];f=x(d);var j=r=e=void 0,k=void 0;if(f===-1)i=null;else if(e=f===d.length-1?f:f+1,r=a._keyframes[d[f]][i],
j=a._keyframes[d[e]][i],f===e&&a._lastKeyframe>0)i=null;else{k=y(a._actorstateIndex[i].reachedKeyframes)||0;if(!a._keyframeCache[i])a._keyframeCache[i]={from:{},to:{}},a._actorstateIndex[i].reachedKeyframes=[];f!==k&&f>k&&(a._actorstateIndex[i].reachedKeyframes.push(f),a._keyframeCache[i]={from:a._keyframeCache[i].to,to:{}});i=O(r,j,d[f],d[e],j.easing)}if(i!==null){d=a._actorstateIndex[c].queue;if((f=d.length)>0){r=d[0];e=r.events;typeof e.start==="function"&&(e.start.call(a._actors[c]),delete e.start);
if(r._internals.fromState===null)r._internals.fromState=i;e=d;r=c;var j=+new Date,k=e[0],m=k._internals,q=void 0;if(m.startTime===null)m.startTime=j;if(!m.pauseBufferUpdated)m.pauseBufferUpdated=j;if(m.pauseBufferUpdated<a._pausedAtTime)m.pauseBuffer+=j-a._pausedAtTime,m.pauseBufferUpdated=j;if(m.toState===null)m.toState={},h(m.toState,m.fromState),h(m.toState,k.state,!0);m.currFrame=m.forceStop?k.duration+1:(j-(m.startTime+m.pauseBuffer))/1E3*a._params.fps;if(m.currFrame>k.duration)q=k.events.complete,
typeof q==="function"&&q.call(a._actors[r]),e.shift();e=O(m.fromState,m.toState,0,+k.duration,k.easing||m.fromState.easing,{currentFrame:m.currFrame});h(i,e,!0);f!==d.length&&(d=x(a._actorstateIndex[c]),a._keyframes[a._keyframeIds[d]][c]=i)}i.prototype.draw.call(i,a.ctx,n)}}a._currentState[c]=i}}function Q(){var b=+new Date;a.frameCount++;a._updateHandle=setTimeout(function(){var c;a._loopLength=b-a._loopStartTime;if(a._loopLength>a._animationDuration&&a._reachedKeyframes.length===a._keyframeIds.length){a._loopStartTime=
a._startTime+parseInt((b-a._startTime)/(a._animationDuration||1),10)*a._animationDuration;a._loopLength-=a._animationDuration||a._loopLength;a._reachedKeyframes=[];a._keyframeCache={};A("loopComplete");if(a._repsRemaining>-1&&(a._repsRemaining--,a._repsRemaining===0)){n.stop();a._currentFrame=a._lastKeyframe;n.clear();n.redraw();a._params.clearOnComplete===!0&&n.clear();if(typeof a._repeatCompleteHandler==="function")a._repeatCompleteHandler.call(a),a._repeatCompleteHandler=void 0;a._repsRemaining=
-1;return}A("loopStart")}a._loopPosition=a._animationDuration?a._loopLength/a._animationDuration:0;a._currentFrame=parseInt(a._loopPosition*a._lastKeyframe,10);c=x(a._keyframeIds);c=c===-1?a._lastKeyframe:a._keyframeIds[c];c>(y(a._reachedKeyframes)||0)&&a._reachedKeyframes.push(c);c=a._reachedKeyframes.length?a._reachedKeyframes.length-1:0;if(a._reachedKeyframes[c]!==a._keyframeIds[c])a._currentFrame=a._reachedKeyframes[c]=a._keyframeIds[c];a._currentFrame<=a._lastKeyframe&&(a.autoclear!==!1&&n.clear(),
A("enterFrame"),G(a._currentFrame));Q()},1E3/a._params.fps);return a._updateHandle}var T={fps:20,autoclear:!0,clearOnStop:!1,clearOnComplete:!1},n={},a={_events:{},_keyframeIds:[],_reachedKeyframes:[],_layerIndex:[],_keyframes:{},_actors:{},_actorstateIndex:{},_keyframeCache:{},_originalStates:{},_liveCopies:{},_currentState:{},_animationDuration:0,_repsRemaining:-1,_lastKeyframe:void 0,_currentFrame:void 0,_loopStartTime:void 0,_startTime:void 0,_pausedAtTime:void 0,_isPaused:void 0,_isStopped:void 0,
_loopLength:void 0,_loopPosition:void 0,_updateHandle:void 0,_repeatCompleteHandler:void 0,frameCount:0},R=Object.prototype.toString,E=/(\+|\-|=|\*|\/)/g,M={ms:function(b){return b*a._params.fps/1E3},s:function(b){return b*a._params.fps}},P={"+=":function(a,b){return a+b},"-=":function(a,b){return a-b},"*=":function(a,b){return a*b},"/=":function(a,b){return a/b}},n={init:function(b,c,i){var e,d,c=c||{},i=i||{};h(c,T);a._params=c;a.autoclear=!!a._params.autoclear;a._params.canvas=b;a.el=b;a.ctx=b.getContext("2d");
for(d in i)i.hasOwnProperty(d)&&this.bind(d,i[d]);for(e in a._params.styles)if(a._params.styles.hasOwnProperty(e)){a._params.styles[e]=a._params.styles[e].toString().toLowerCase();if(e==="height"||e==="width"||e==="top"||e==="left")a._params.styles[e].match(/px/)||(a._params.styles[e]+="px");b=a.el.style;c=e;i=a._params.styles[e];typeof i==="string"&&(i=i.replace(/\s/g,""));b[c]=i}a._params.styles&&(a._params.styles.height&&I.call(a.el,"height"),a._params.styles.width&&I.call(a.el,"width"));delete this.init;
return this},getVersion:function(){return"1.0.4"},getContext:function(){return a.ctx},isPlaying:function(){return a._isStopped===!1&&a._isPaused===!1},play:function(){var b;b=+new Date;if(this.isPlaying())return this;a._isStopped=a._isPaused=!1;if(!a._startTime)a._startTime=b;a._loopStartTime?(b-=a._pausedAtTime,a._loopStartTime+=b,a._startTime+=b):(a._loopStartTime=b,D(),A("loopStart"));Q();return this},pause:function(){clearTimeout(a._updateHandle);a._pausedAtTime=+new Date;a._isPaused=!0;return this},
stop:function(){var b;clearTimeout(a._updateHandle);delete a._loopStartTime;delete a._startTime;delete a._pausedAtTime;a._isStopped=!0;a._repsRemaining=-1;a._keyframeCache={};for(b in a._actorstateIndex)if(a._actorstateIndex.hasOwnProperty(b))a._actorstateIndex[b].queue=[],a._actorstateIndex[b].reachedKeyframes=[];a._params.clearOnStop===!0&&n.clear();return this},clear:function(){a.ctx.clearRect(0,0,a.el.width,a.el.height);return this},redraw:function(){G(a._currentFrame);return this},repeat:function(b,
c){typeof b==="number"&&b>=-1?(a._repeatCompleteHandler=c,a._repsRemaining=parseInt(b,10)+1):a._repsRemaining=-1;return this.play()},iterate:function(a,b){typeof a==="number"&&a>=-1&&this.repeat(a-1,b);return this.play()},add:function(b,c){var i={},e=["setup","draw","teardown"],d,f=function(){return function(){}};if(b instanceof Function)i={setup:function(){},draw:b,teardown:function(){}};else if(b instanceof Object){b.draw instanceof Function||console&&console.error&&console.error("Trying to add an Object as an actor, but it does not have a draw function.");
for(d=0;d<e.length;d++)i[e[d]]=b[e[d]]instanceof Function?b[e[d]]:f()}else{console&&console.error&&console.error(b+" is not a valid actor Object.");return}i.params=c;i.constructor=b.draw;if(typeof i.id==="undefined")i.id=i.params.id||i.params.name||parseInt(Math.random().toString().substr(2),10)+ +new Date;delete i.params.name;if(typeof a._actorstateIndex[i.id]==="undefined")a._actorstateIndex[i.id]=[],a._actorstateIndex[i.id].queue=[],a._actorstateIndex[i.id].reachedKeyframes=[];a._actors[i.id]=
i;a._liveCopies[i.id]={};a._layerIndex.push(i.id);i.params.layer=a._layerIndex.length-1;i=S(i);i.setup(this);delete i.setup;return i},removeActor:function(b){var c,d,e;if(typeof b==="string"&&a._actors[b]){c=a._actors[b];d=a._actorstateIndex[b].slice(0);for(e=0;e<d.length;e++)c.remove(d[e]);delete a._actorstateIndex[b];delete a._currentState[b];for(e=0;e<a._layerIndex.length;e++)if(a._layerIndex[e]===b){a._layerIndex.splice(e,1);break}c=c.teardown;delete a._actors[b];c(b)}else console&&console.error&&
console.error(b," is not a valid actor ID.");return this},getActor:function(b){return a._actors[b]},getActorList:function(){var b=[],c;for(c in a._actors)a._actors.hasOwnProperty(c)&&b.push(c);return b},removeAllKeyframes:function(){for(var b in a._actors)a._actors.hasOwnProperty(b)&&a._actors[b].removeAll();return this},framerate:function(b){var c,d={},e={},f={},n,r,l,j;if(b&&typeof b==="number"&&b>0){c=a._params.fps;c=b/c;a._params.fps=parseInt(b,10);h(d,a._actorstateIndex);h(e,a._originalStates);
h(f,a._liveCopies);b=a._reachedKeyframes.slice(0);this.removeAllKeyframes();for(n in d)if(d.hasOwnProperty(n)){for(j=d[n].length-1;j>-1;j--)a._actors[n].keyframe(c*d[n][j],e[d[n][j]][n]);for(j=0;j<d[n].queue.length;j++)a._actorstateIndex[n].queue[j].duration*=c;a._actorstateIndex[n].reachedKeyframes=d[n].reachedKeyframes.splice(0)}for(l in f)if(f.hasOwnProperty(l))for(r in a._liveCopies[l]={},f[l])f[l].hasOwnProperty(r)&&a._actors[l].liveCopy(+r*c,f[l][r].copyOf);for(j=0;j<b.length;j++)a._reachedKeyframes[j]=
b[j]*c}return a._params.fps},gotoFrame:function(b){var c=+new Date,d;this.isPlaying()&&this.stop();b=t(b)%a._lastKeyframe;a._currentFrame=b;a._loopStartTime=a._startTime=c-b*(1E3/a._params.fps);a._pausedAtTime=c;a._reachedKeyframes=a._keyframeIds.slice(0,x(a._keyframeIds)+1);a._keyframeCache={};n.clear();for(d in a._actors)a._actors.hasOwnProperty(d)&&(a._keyframeCache[d]={from:{},to:{}},a._actorstateIndex[d].reachedKeyframes.push(x(a._actorstateIndex[d])));G(a._currentFrame);return this},gotoAndPlay:function(a){this.gotoFrame(a);
return this.play()},getNumberOfLayers:function(){return a._layerIndex.length},getState:function(){return a._currentState},bind:function(b,c){typeof b==="string"&&typeof c==="function"&&(a._events[b]||(a._events[b]=[]),a._events[b].push(c));return this},unbind:function(b,c){var d;if(typeof b==="string"&&a._events[b])if(typeof c==="function")for(d=0;d<a._events[b].length;d++)a._events[b][d]===c&&a._events[b].splice(d,1);else a._events[b]=[];return this},_debug:function(){return a}};return n.init(b,
f,d)}kapi.tween={linear:function(b,f,d,h){return d*b/h+f}};kapi.tween.easeInQuad=function(b,f,d,h){b/=h;return d*b*b+f};kapi.tween.easeOutQuad=function(b,f,d,h){b/=h;return-d*b*(b-2)+f};kapi.tween.easeInOutQuad=function(b,f,d,h){b/=h/2;if(b<1)return d/2*b*b+f;b--;return-d/2*(b*(b-2)-1)+f};kapi.tween.easeInCubic=function(b,f,d,h){b/=h;return d*b*b*b+f};kapi.tween.easeOutCubic=function(b,f,d,h){b/=h;b--;return d*(b*b*b+1)+f};
kapi.tween.easeInOutCubic=function(b,f,d,h){b/=h/2;if(b<1)return d/2*b*b*b+f;b-=2;return d/2*(b*b*b+2)+f};kapi.tween.easeInQuart=function(b,f,d,h){b/=h;return d*b*b*b*b+f};kapi.tween.easeOutQuart=function(b,f,d,h){b/=h;b--;return-d*(b*b*b*b-1)+f};kapi.tween.easeInOutQuart=function(b,f,d,h){b/=h/2;if(b<1)return d/2*b*b*b*b+f;b-=2;return-d/2*(b*b*b*b-2)+f};kapi.tween.easeInQuint=function(b,f,d,h){b/=h;return d*b*b*b*b*b+f};kapi.tween.easeOutQuint=function(b,f,d,h){b/=h;b--;return d*(b*b*b*b*b+1)+f};
kapi.tween.easeInOutQuint=function(b,f,d,h){b/=h/2;if(b<1)return d/2*b*b*b*b*b+f;b-=2;return d/2*(b*b*b*b*b+2)+f};kapi.tween.easeInSine=function(b,f,d,h){return-d*Math.cos(b/h*(Math.PI/2))+d+f};kapi.tween.easeOutSine=function(b,f,d,h){return d*Math.sin(b/h*(Math.PI/2))+f};kapi.tween.easeInOutSine=function(b,f,d,h){return-d/2*(Math.cos(Math.PI*b/h)-1)+f};kapi.tween.easeInExpo=function(b,f,d,h){return d*Math.pow(2,10*(b/h-1))+f};
kapi.tween.easeOutExpo=function(b,f,d,h){return d*(-Math.pow(2,-10*b/h)+1)+f};kapi.tween.easeInOutExpo=function(b,f,d,h){b/=h/2;if(b<1)return d/2*Math.pow(2,10*(b-1))+f;b--;return d/2*(-Math.pow(2,-10*b)+2)+f};kapi.tween.easeInCirc=function(b,f,d,h){b/=h;return-d*(Math.sqrt(1-b*b)-1)+f};kapi.tween.easeOutCirc=function(b,f,d,h){b/=h;b--;return d*Math.sqrt(1-b*b)+f};kapi.tween.easeInOutCirc=function(b,f,d,h){b/=h/2;if(b<1)return-d/2*(Math.sqrt(1-b*b)-1)+f;b-=2;return d/2*(Math.sqrt(1-b*b)+1)+f};