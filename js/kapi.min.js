/**
 * Kapi - A keyframe API
 * v1.0.0
 * by Jeremy Kahn - jeremyckahn@gmail.com
 * Maintained at: https://github.com/jeremyckahn/kapi
 * 
 * Kapi streamlines animation development for the HTML 5 canvas by providing a keyframing API.  It manages timing and tweening so you don't have to.   
 * 
 * Kapi is distributed under the MIT license.
 * Learn more about keyframes: http://en.wikipedia.org/wiki/Key_frame
 *
 * This file also includes `kapi.tweens.js`
 * They were written by Robert Penner, copied under BSD License (http://www.robertpenner.com/)
 * 
 * Please use, distribute and enjoy.
 */

function kapi(b,e,d){function h(a,c,l){var b;if(!c)return a;a=a||{};for(b in c)if(c.hasOwnProperty(b))if(typeof c[b]==="object"&&b!=="prototype"){if(!a[b]||l)a[b]=O.call(c[b])==="[object Array]"?[]:{};h(a[b],c[b],l)}else if(typeof a[b]==="undefined"||l)a[b]=c[b];return h(a,void 0,l)}function D(g,c,b,f,n,h){if((h||a._currentFrame)>=c)return typeof h==="undefined"?kapi.tween[g](a._currentFrame-c,f,n-f,b-c||1):kapi.tween[g](h-c,f,n-f,b-c||1)}function o(a){return a.length>0?a[a.length-1]:void 0}function E(g){this[g]=
this.style[g].replace(/px/gi,"")||a._params[g]}function F(a){return a.sort(function(a,g){return a-g})}function y(a){return typeof a==="string"&&(/^#([0-9]|[a-f]){3}$/i.test(a)||/^#([0-9]|[a-f]){6}$/i.test(a))}function w(a){return typeof a==="string"&&/^rgb\(\d+\s*,\d+\s*,\d+\s*\)\s*$/i.test(a)}function z(a){return parseInt(a,16)}function G(a){return typeof a==="string"?(a=a.replace(/#/g,""),a.length===3&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),[z(a.substr(0,2)),z(a.substr(2,2)),z(a.substr(4,2))]):[0,0,
0]}function H(a){if(typeof a!=="string")return a;return/^(#|rgb)/.test(a)?/^#/.test(a)?G(a):(a=a.match(/\d+/g),[+a[0],+a[1],+a[2]]):a}function v(a){return typeof a==="string"&&/^\s*(\+|\-|\*|\/)\=/.test(a)||typeof a==="function"}function t(a){var c;if(typeof a==="number")return parseInt(a,10);else if(typeof a==="string"){a=a.replace(/\s/g,"");c=/^(\d|\.)+/.exec(a)[0];a=/\D+$/.exec(a);if(!a)return parseInt(c,10);if(I[a])c=parseInt(I[a].call(this,c),10);else throw"Invalid keyframe identifier unit!";
return c}else throw"Invalid keyframe identifier type!";}function J(){var g;for(g=0;g<a._layerIndex.length;g++)a._actors[a._layerIndex[g]].params.layer=g}function A(){a._lastKeyframe=o(a._keyframeIds);a._animationDuration=1E3*(a._lastKeyframe/a._params.fps)}function s(g){var c;if(a._currentFrame===0)return 0;if(a._currentFrame>g[g.length-1])return-1;for(c=g.length-1;c>=0;c--)if(g[c]<a._currentFrame)return c;return g.length-1}function P(g){g.keyframe=function(c,b){var f,n;for(f in b)if(b.hasOwnProperty(f)&&
typeof b[f]==="string"&&b[f]===(n=+b[f].replace(B,"")).toString())b[f]=n;f=h({},b);try{c=t(c)}catch(d){window.console&&window.console.error&&console.error(d);return}if(c<0)throw"Keyframe "+c+" is less than zero!";c>0&&typeof a._keyframes["0"]==="undefined"&&(a._keyframes["0"]={},a._keyframeIds.unshift(0));typeof a._keyframes[c]==="undefined"&&(a._keyframes[c]={});typeof a._originalStates[c]==="undefined"&&(a._originalStates[c]={});a._keyframes[c][g.id]=b;a._originalStates[c][g.id]=f;f=c;a:{for(n=
0;n<a._keyframeIds.length;n++)if(a._keyframeIds[n]===f)break a;a._keyframeIds.push(f);F(a._keyframeIds)}f={add:f};n=a._actorstateIndex[g.id];var e=!1,k;if(typeof f.add!=="undefined"){for(k=0;k<n.length;k++)n[k]===f.add&&(e=!0);e||(n.push(f.add),F(n))}f=g.id;for(var i,j,m,p,r,e=0;e<a._actorstateIndex[f].length;e++){n=a._actorstateIndex[f][e];i=typeof i==="undefined"?h({},a._actors[f].params):h({},j);k=h(i,a._originalStates[n][f],!0);k.prototype=a._actors[f];a._keyframes[n][f]=k;for(m in k)if(k.hasOwnProperty(m)&&
typeof k[m]==="string")if(j&&(r=j[m]),p=k[m].replace(/\s/g,""),y(p)||w(p)){i=k;var Q=m;var o=void 0;w(p)||(o=G(p),p="rgb("+o[0]+","+o[1]+","+o[2]+")");i[Q]=p}else j&&r&&v(r)&&typeof a._originalStates[n][f][m]==="undefined"&&(k[m]="+=0");i=n;j=k}var s,u;for(u in a._liveCopies)if(a._liveCopies.hasOwnProperty(u))for(s in j=a._liveCopies[u],j)j.hasOwnProperty(s)&&(a._keyframes[s][u]=a._keyframes[a._liveCopies[u][s].copyOf][u]);J();delete b.layer;A();return this};g.to=function(c,b,f){var n=a._actorstateIndex[g.id].queue;
n.push({duration:t(c),state:b||{},events:f||{}});c=o(n);c._internals={};c._internals.startTime=null;c._internals.fromState=null;c._internals.toState=null;c._internals.pauseBuffer=null;c._internals.pauseBufferUpdated=null;return this};g.clearQueue=function(){a._actorstateIndex[g.id].queue.length=1;return this};g.skipToEnd=function(){var c=a._actorstateIndex[g.id].queue;if(!c.length)return this;c[0]._internals.forceStop=!0;return this};g.endCurrentAction=function(){var c=a._actorstateIndex[g.id].queue;
if(!c.length)return this;c[0]._internals.toState=this.getState();this.skipToEnd();return this};g.remove=function(c){var b,f,n,h=!1,c=t(c);if(a._keyframes[c]&&a._keyframes[c][g.id]){delete a._keyframes[c][g.id];delete a._originalStates[c][g.id];for(b in a._keyframes[c])a._keyframes[c].hasOwnProperty(b)&&(h=!0);if(!h&&c!==0){delete a._keyframes[c];delete a._originalStates[c];for(b=0;b<a._keyframeIds.length;b++)if(a._keyframeIds[b]===c){a._keyframeIds.splice(b,1);break}for(b=0;b<a._reachedKeyframes.length;b++)if(a._reachedKeyframes[b]===
c){a._reachedKeyframes.splice(b,1);break}}for(b=0;b<a._actorstateIndex[g.id].length;b++)if(a._actorstateIndex[g.id][b]===c){a._actorstateIndex[g.id].splice(b,1);b<=a._actorstateIndex[g.id].reachedKeyframes.length&&a._actorstateIndex[g.id].reachedKeyframes.pop();break}a._liveCopies[g.id]&&a._liveCopies[g.id].hasOwnProperty(c)&&delete a._liveCopies[g.id][c];for(f in a._liveCopies[g.id])a._liveCopies[g.id].hasOwnProperty(f)&&a._liveCopies[g.id][f].copyOf===c&&(g.remove(f),n=!0);n||delete a._liveCopies[g.id];
A()}else console&&console.error&&(a._keyframes[c]?console.error("Trying to remove "+g.id+" from keyframe "+c+", but "+g.id+" does not exist at that keyframe."):console.error("Trying to remove "+g.id+" from keyframe "+c+", but keyframe "+c+" does not exist."));return this};g.removeAll=function(){for(var c=g.id;a._actorstateIndex[c]&&a._actorstateIndex[c].length;)a._actors[c].remove(o(a._actorstateIndex[c]));return this};g.updateKeyframe=function(c,b){var f,c=t(c);a._keyframes[c]&&a._keyframes[c][g.id]?
(f=a._originalStates[c][g.id],h(f,b,!0),g.keyframe(c,f)):window.console&&window.console.error&&(a._keyframes[c]?console.error("Keyframe "+c+" does not contain "+g.id):console.error("Keyframe "+c+" does not exist."));return this};g.liveCopy=function(c,b){c=t(c);b=t(b);a._keyframes[b]&&a._keyframes[b][g.id]?(a._liveCopies[g.id][c]={copyOf:b},g.keyframe(c,{})):window.console&&window.console.error&&(a._keyframes[b]?console.error("Trying to make a liveCopy of "+b+", but  "+g.id+" does not exist at keyframe "+
c+"."):console.error("Trying to make a liveCopy of "+b+", but keyframe "+b+" does not exist."));return this};g.getState=function(){return a._currentState[g.id]||{}};g.get=function(c){return c.toLowerCase()==="layer"?a._actors[g.id].params.layer:g.getState()[c]};g.moveToLayer=function(c){var b;if(typeof c!=="number")throw"moveToLayer requires a number specifying which layer to move "+this.id+" to.";c=parseInt(c,10);if(c>-1&&c<a._layerIndex.length)b=a._layerIndex.splice(g.params.layer,1)[0],a._layerIndex.splice(c,
0,b),J();else throw'"'+c+'" is out of bounds.  There are only '+a._layerIndex.length+" layers in the animation, "+g.id+" can only be moved to layers 0-"+a._layerIndex.length;return g};return g}function x(b){var c;if(typeof b==="string"&&a._events[b])for(c=0;c<a._events[b].length;c++)a._events[b][c].call(a)}function K(b,c,l,f,n,e){var d,k,i,j,m,p,r,o={},n=kapi.tween[n]?n:"linear",e=e||{};for(k in b)if(b.hasOwnProperty(k)){i=b[k];j=b.prototype.id;if(typeof i==="object"&&k!=="prototype")for(r in i)if(i.hasOwnProperty(r)){i=
i[r];break}typeof a._keyframeCache[j].from[k]!=="undefined"?i=a._keyframeCache[j].from[k]:v(i)&&(typeof i==="function"?i=i.call(b)||0:(d=i.match(/(\+|\-|\*|\/)\=/)[0],m=s(a._actorstateIndex[j])-1,m=m===-1?b.prototype.params[k]||0:a._keyframes[m][j][k],i=L[d](m,+i.replace(B,""))),a._keyframeCache[j].from[k]=i);if(typeof i==="number"||v(i)||y(i)||w(i)){m=!1;j=c[k];p=c.prototype.id;if(typeof j==="object"&&k!=="prototype")for(r in j)if(j.hasOwnProperty(r)){n=kapi.tween[r]?r:"linear";j=j[r];break}typeof a._keyframeCache[p].to[k]!==
"undefined"?j=a._keyframeCache[p].to[k]:v(j)&&(typeof j==="function"?j=j.call(c)||0:(d=j.match(/(\+|\-|\*|\/)\=/)[0],j=L[d](i,+j.replace(B,""))),a._keyframeCache[p].to[k]=j);d=typeof i;if(!(typeof j==="number"||v(j)||y(j)||w(j))||d!==typeof j)o[k]=i;else if(typeof i==="string"&&(m=!0,i=H(i),j=H(j)),m){o[k]="rgb(";for(d=0;d<i.length;d++)o[k]+=Math.floor(D.call(this,n,l,f,i[d],j[d],e.currentFrame))+",";o[k]=o[k].replace(/,$/,")")}else o[k]=D.call(this,n,l,f,i,j,e.currentFrame)}}h(o,b);return o}function M(b){var c,
l,f,d,e,q,k;for(k=0;k<a._layerIndex.length;k++){c=a._layerIndex[k];if(typeof a._actorstateIndex[c][0]!=="undefined"&&b>=a._actorstateIndex[c][0]){l=c;d=a._actorstateIndex[l];e=s(d);var i=q=f=void 0,j=void 0;if(e===-1)l=null;else if(f=e===d.length-1?e:e+1,q=a._keyframes[d[e]][l],i=a._keyframes[d[f]][l],e===f&&a._lastKeyframe>0)l=null;else{j=o(a._actorstateIndex[l].reachedKeyframes)||0;if(!a._keyframeCache[l])a._keyframeCache[l]={from:{},to:{}},a._actorstateIndex[l].reachedKeyframes=[];e!==j&&e>j&&
(a._actorstateIndex[l].reachedKeyframes.push(e),a._keyframeCache[l]={from:a._keyframeCache[l].to,to:{}});l=K(q,i,d[e],d[f],i.easing)}if(l!==null){d=a._actorstateIndex[c].queue;if((e=d.length)>0){q=d[0];f=q.events;typeof f.start==="function"&&(f.start.call(a._actors[c]),delete f.start);if(q._internals.fromState===null)q._internals.fromState=l;f=d;q=c;var i=+new Date,j=f[0],m=j._internals,p=void 0;if(m.startTime===null)m.startTime=i;if(!m.pauseBufferUpdated)m.pauseBufferUpdated=i;if(m.pauseBufferUpdated<
a._pausedAtTime)m.pauseBuffer+=i-a._pausedAtTime,m.pauseBufferUpdated=i;if(m.toState===null)m.toState={},h(m.toState,m.fromState),h(m.toState,j.state,!0);m.currFrame=m.forceStop?j.duration+1:(i-(m.startTime+m.pauseBuffer))/1E3*a._params.fps;if(m.currFrame>j.duration)p=j.events.complete,typeof p==="function"&&p.call(a._actors[q]),f.shift();f=K(m.fromState,m.toState,0,+j.duration,j.easing||m.fromState.easing,{currentFrame:m.currFrame});h(l,f,!0);e!==d.length&&(d=s(a._actorstateIndex[c]),a._keyframes[a._keyframeIds[d]][c]=
l)}l.prototype.draw.call(l,a.ctx)}}a._currentState[c]=l}}function N(){var b=+new Date;a.frameCount++;a._updateHandle=setTimeout(function(){var c;a._loopLength=b-a._loopStartTime;if(a._loopLength>a._animationDuration&&a._reachedKeyframes.length===a._keyframeIds.length){a._loopStartTime=a._startTime+parseInt((b-a._startTime)/(a._animationDuration||1),10)*a._animationDuration;a._loopLength-=a._animationDuration||a._loopLength;a._reachedKeyframes=[];a._keyframeCache={};x("loopComplete");if(a._repsRemaining>
-1&&(a._repsRemaining--,a._repsRemaining===0)){C.stop();if(typeof a._repeatCompleteHandler==="function")a._repeatCompleteHandler.call(a),a._repeatCompleteHandler=void 0;a._repsRemaining=-1;return}x("loopStart")}a._loopPosition=a._animationDuration?a._loopLength/a._animationDuration:0;a._currentFrame=parseInt(a._loopPosition*a._lastKeyframe,10);c=s(a._keyframeIds);c=c===-1?a._lastKeyframe:a._keyframeIds[c];c>(o(a._reachedKeyframes)||0)&&a._reachedKeyframes.push(c);c=a._reachedKeyframes.length?a._reachedKeyframes.length-
1:0;if(a._reachedKeyframes[c]!==a._keyframeIds[c])a._currentFrame=a._reachedKeyframes[c]=a._keyframeIds[c];a._currentFrame<=a._lastKeyframe&&(a.autoclear!==!1&&a.ctx.clearRect(0,0,a.el.width,a.el.height),x("enterFrame"),M(a._currentFrame));N()},1E3/a._params.fps);return a._updateHandle}var R={fps:20,autoclear:!0},C={},a={_events:{},_keyframeIds:[],_reachedKeyframes:[],_layerIndex:[],_keyframes:{},_actors:{},_actorstateIndex:{},_keyframeCache:{},_originalStates:{},_liveCopies:{},_currentState:{},_animationDuration:0,
_repsRemaining:-1,_lastKeyframe:void 0,_currentFrame:void 0,_loopStartTime:void 0,_startTime:void 0,_pausedAtTime:void 0,_isPaused:void 0,_isStopped:void 0,_loopLength:void 0,_loopPosition:void 0,_updateHandle:void 0,_repeatCompleteHandler:void 0,frameCount:0},O=Object.prototype.toString,B=/(\+|\-|=|\*|\/)/g,I={ms:function(b){return b*a._params.fps/1E3},s:function(b){return b*a._params.fps}},L={"+=":function(a,b){return a+b},"-=":function(a,b){return a-b},"*=":function(a,b){return a*b},"/=":function(a,
b){return a/b}},C={init:function(b,c,l){var f,d,c=c||{},l=l||{};h(c,R);a._params=c;a.autoclear=!!a._params.autoclear;a._params.canvas=b;a.el=b;a.ctx=b.getContext("2d");for(d in l)l.hasOwnProperty(d)&&this.bind(d,l[d]);for(f in a._params.styles)if(a._params.styles.hasOwnProperty(f)){a._params.styles[f]=a._params.styles[f].toString().toLowerCase();if(f==="height"||f==="width"||f==="top"||f==="left")a._params.styles[f].match(/px/)||(a._params.styles[f]+="px");b=a.el.style;c=f;l=a._params.styles[f];typeof l===
"string"&&(l=l.replace(/\s/g,""));b[c]=l}a._params.styles&&(a._params.styles.height&&E.call(a.el,"height"),a._params.styles.width&&E.call(a.el,"width"));delete this.init;return this},getVersion:function(){return"1.0.0b4"},isPlaying:function(){return a._isStopped===!1&&a._isPaused===!1},play:function(){var b;b=+new Date;if(this.isPlaying())return this;a._isStopped=a._isPaused=!1;if(!a._startTime)a._startTime=b;a._loopStartTime?(b-=a._pausedAtTime,a._loopStartTime+=b,a._startTime+=b):(a._loopStartTime=
b,A(),x("loopStart"));N();return this},pause:function(){clearTimeout(a._updateHandle);a._pausedAtTime=+new Date;a._isPaused=!0;return this},stop:function(){var b;clearTimeout(a._updateHandle);delete a._loopStartTime;delete a._startTime;delete a._pausedAtTime;a._isStopped=!0;a._repsRemaining=-1;for(b in a._actorstateIndex)if(a._actorstateIndex.hasOwnProperty(b))a._actorstateIndex[b].queue=[],a._actorstateIndex[b].reachedKeyframes=[];a.ctx.clearRect(0,0,a.el.width,a.el.height);return this},repeat:function(b,
c){typeof b==="number"&&b>=-1?(a._repeatCompleteHandler=c,a._repsRemaining=parseInt(b,10)+1):a._repsRemaining=-1;return this.play()},iterate:function(a,b){typeof a==="number"&&a>=-1&&this.repeat(a-1,b);return this.play()},add:function(b,c){var d={},f=["setup","draw","teardown"],e,h=function(){return function(){}};if(b instanceof Function)d={setup:function(){},draw:b,teardown:function(){}};else if(b instanceof Object){b.draw instanceof Function||console&&console.error&&console.error("Trying to add an Object as an actor, but it does not have a draw function.");
for(e=0;e<f.length;e++)d[f[e]]=b[f[e]]instanceof Function?b[f[e]]:h()}else{console&&console.error&&console.error(b+" is not a valid actor Object.");return}d.params=c;d.constructor=b.draw;if(typeof d.id==="undefined")d.id=d.params.id||d.params.name||parseInt(Math.random().toString().substr(2),10)+ +new Date;delete d.params.name;if(typeof a._actorstateIndex[d.id]==="undefined")a._actorstateIndex[d.id]=[],a._actorstateIndex[d.id].queue=[],a._actorstateIndex[d.id].reachedKeyframes=[];a._actors[d.id]=
d;a._liveCopies[d.id]={};a._layerIndex.push(d.id);d.params.layer=a._layerIndex.length-1;d=P(d);d.setup(this);delete d.setup;return d},removeActor:function(b){var c,d,f;if(typeof b==="string"&&a._actors[b]){c=a._actors[b];d=a._actorstateIndex[b].slice(0);for(f=0;f<d.length;f++)c.remove(d[f]);delete a._actorstateIndex[b];delete a._currentState[b];for(f=0;f<a._layerIndex.length;f++)if(a._layerIndex[f]===b){a._layerIndex.splice(f,1);break}c=c.teardown;delete a._actors[b];c(b)}else console&&console.error&&
console.error(b," is not a valid actor ID.");return this},getActor:function(b){return a._actors[b]},getActorList:function(){var b=[],c;for(c in a._actors)a._actors.hasOwnProperty(c)&&b.push(c);return b},removeAllKeyframes:function(){for(var b in a._actors)a._actors.hasOwnProperty(b)&&a._actors[b].removeAll();return this},framerate:function(b){var c,d={},f={},e={},o,q,k,i;if(b&&typeof b==="number"&&b>0){c=a._params.fps;c=b/c;a._params.fps=parseInt(b,10);h(d,a._actorstateIndex);h(f,a._originalStates);
h(e,a._liveCopies);b=a._reachedKeyframes.slice(0);this.removeAllKeyframes();for(o in d)if(d.hasOwnProperty(o)){for(i=d[o].length-1;i>-1;i--)a._actors[o].keyframe(c*d[o][i],f[d[o][i]][o]);for(i=0;i<d[o].queue.length;i++)a._actorstateIndex[o].queue[i].duration*=c;a._actorstateIndex[o].reachedKeyframes=d[o].reachedKeyframes.splice(0)}for(k in e)if(e.hasOwnProperty(k))for(q in a._liveCopies[k]={},e[k])e[k].hasOwnProperty(q)&&a._actors[k].liveCopy(+q*c,e[k][q].copyOf);for(i=0;i<b.length;i++)a._reachedKeyframes[i]=
b[i]*c}return a._params.fps},gotoFrame:function(b){var c=+new Date;this.isPlaying()&&this.stop();b=t(b)%a._lastKeyframe;a._currentFrame=b;a._loopStartTime=a._startTime=c-b*a._params.fps;a._pausedAtTime=c;a._reachedKeyframes=a._keyframeIds.slice(0,s(a._keyframeIds));a.ctx.clearRect(0,0,a.el.width,a.el.height);M(a._currentFrame);return this},gotoAndPlay:function(a){this.gotoFrame(a);return this.play()},getNumberOfLayers:function(){return a._layerIndex.length},getState:function(){return a._currentState},
bind:function(b,c){typeof b==="string"&&typeof c==="function"&&(a._events[b]||(a._events[b]=[]),a._events[b].push(c));return this},unbind:function(b,c){var d;if(typeof b==="string"&&a._events[b])if(typeof c==="function")for(d=0;d<a._events[b].length;d++)a._events[b][d]===c&&a._events[b].splice(d,1);else a._events[b]=[];return this},_debug:function(){return a}};return C.init(b,e,d)}kapi.tween={linear:function(b,e,d,h){return d*b/h+e}};kapi.tween.easeInQuad=function(b,e,d,h){b/=h;return d*b*b+e};
kapi.tween.easeOutQuad=function(b,e,d,h){b/=h;return-d*b*(b-2)+e};kapi.tween.easeInOutQuad=function(b,e,d,h){b/=h/2;if(b<1)return d/2*b*b+e;b--;return-d/2*(b*(b-2)-1)+e};kapi.tween.easeInCubic=function(b,e,d,h){b/=h;return d*b*b*b+e};kapi.tween.easeOutCubic=function(b,e,d,h){b/=h;b--;return d*(b*b*b+1)+e};easeInOutCubic=function(b,e,d,h){b/=h/2;if(b<1)return d/2*b*b*b+e;b-=2;return d/2*(b*b*b+2)+e};kapi.tween.easeInQuart=function(b,e,d,h){b/=h;return d*b*b*b*b+e};
kapi.tween.easeOutQuart=function(b,e,d,h){b/=h;b--;return-d*(b*b*b*b-1)+e};kapi.tween.easeInOutQuart=function(b,e,d,h){b/=h/2;if(b<1)return d/2*b*b*b*b+e;b-=2;return-d/2*(b*b*b*b-2)+e};kapi.tween.easeInQuint=function(b,e,d,h){b/=h;return d*b*b*b*b*b+e};kapi.tween.easeOutQuint=function(b,e,d,h){b/=h;b--;return d*(b*b*b*b*b+1)+e};kapi.tween.easeInOutQuint=function(b,e,d,h){b/=h/2;if(b<1)return d/2*b*b*b*b*b+e;b-=2;return d/2*(b*b*b*b*b+2)+e};
kapi.tween.easeInSine=function(b,e,d,h){return-d*Math.cos(b/h*(Math.PI/2))+d+e};kapi.tween.easeOutSine=function(b,e,d,h){return d*Math.sin(b/h*(Math.PI/2))+e};kapi.tween.easeInOutSine=function(b,e,d,h){return-d/2*(Math.cos(Math.PI*b/h)-1)+e};kapi.tween.easeInExpo=function(b,e,d,h){return d*Math.pow(2,10*(b/h-1))+e};kapi.tween.easeOutExpo=function(b,e,d,h){return d*(-Math.pow(2,-10*b/h)+1)+e};
kapi.tween.easeInOutExpo=function(b,e,d,h){b/=h/2;if(b<1)return d/2*Math.pow(2,10*(b-1))+e;b--;return d/2*(-Math.pow(2,-10*b)+2)+e};kapi.tween.easeInCirc=function(b,e,d,h){b/=h;return-d*(Math.sqrt(1-b*b)-1)+e};kapi.tween.easeOutCirc=function(b,e,d,h){b/=h;b--;return d*Math.sqrt(1-b*b)+e};kapi.tween.easeInOutCirc=function(b,e,d,h){b/=h/2;if(b<1)return-d/2*(Math.sqrt(1-b*b)-1)+e;b-=2;return d/2*(Math.sqrt(1-b*b)+1)+e};