/**
 * Kapi - A keyframe API
 * v1.0.5
 * by Jeremy Kahn - jeremyckahn@gmail.com
 * Maintained at: https://github.com/jeremyckahn/kapi
 * 
 * Kapi streamlines animation development for the HTML 5 canvas by providing a keyframing API.  It manages timing and tweening so you don't have to.   
 * 
 * Kapi is distributed under the MIT license.
 * Learn more about keyframes: http://en.wikipedia.org/wiki/Key_frame
 *
 * This file also includes `kapi.tweens.js`
 * They were written by Robert Penner, copied under BSD License (http://www.robertpenner.com/)
 * 
 * Please use, distribute and enjoy.
 */

function kapi(b,f,e){function h(a,c,b){var d;if(!c)return a;a=a||{};for(d in c)if(c.hasOwnProperty(d))if(typeof c[d]==="object"&&d!=="prototype"){if(!a[d]||b)a[d]=Q.call(c[d])==="[object Array]"?[]:{};h(a[d],c[d],b)}else if(typeof a[d]==="undefined"||b)a[d]=c[d];return h(a,void 0,b)}function G(g,c,b,d,n,h){if((h||a._currentFrame)>=c)return typeof h==="undefined"?kapi.tween[g](a._currentFrame-c,d,n-d,b-c||1):kapi.tween[g](h-c,d,n-d,b-c||1)}function x(a){return a.length>0?a[a.length-1]:void 0}function H(g){this[g]=
this.style[g].replace(/px/gi,"")||a._params[g]}function I(a){return a.sort(function(a,g){return a-g})}function A(a){return typeof a==="string"&&(/^#([0-9]|[a-f]){3}$/i.test(a)||/^#([0-9]|[a-f]){6}$/i.test(a))}function y(a){return typeof a==="string"&&/^rgb\(\d+\s*,\d+\s*,\d+\s*\)\s*$/i.test(a)}function B(a){return parseInt(a,16)}function J(a){return typeof a==="string"?(a=a.replace(/#/g,""),a.length===3&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),[B(a.substr(0,2)),B(a.substr(2,2)),B(a.substr(4,2))]):[0,0,
0]}function K(a){if(typeof a!=="string")return a;return/^(#|rgb)/.test(a)?/^#/.test(a)?J(a):(a=a.match(/\d+/g),[+a[0],+a[1],+a[2]]):a}function v(a){return typeof a==="string"&&/^\s*(\+|\-|\*|\/)\=/.test(a)||typeof a==="function"}function s(a){var c;if(typeof a==="number")return parseInt(a,10);else if(typeof a==="string"){a=a.replace(/\s/g,"");c=/^(\d|\.)+/.exec(a)[0];a=/\D+$/.exec(a);if(!a)return parseInt(c,10);if(L[a])c=parseInt(L[a].call(this,c),10);else throw"Invalid keyframe identifier unit!";
return c}else throw"Invalid keyframe identifier type!";}function M(){var g;for(g=0;g<a._layerIndex.length;g++)a._actors[a._layerIndex[g]].params.layer=g}function C(){a._lastKeyframe=x(a._keyframeIds);a._animationDuration=1E3*(a._lastKeyframe/a._params.fps)}function w(g){var c;if(a._currentFrame===0)return 0;if(a._currentFrame>g[g.length-1])return-1;for(c=g.length-1;c>=0;c--)if(g[c]<a._currentFrame)return c;return g.length-1}function R(g){g.keyframe=function(c,b){var d,n;for(d in b)if(b.hasOwnProperty(d)&&
typeof b[d]==="string"&&b[d]===(n=+b[d].replace(D,"")).toString())b[d]=n;d=h({},b);try{c=s(c)}catch(e){window.console&&window.console.error&&console.error(e);return}if(c<0)throw"Keyframe "+c+" is less than zero!";c>0&&typeof a._keyframes["0"]==="undefined"&&(a._keyframes["0"]={},a._keyframeIds.unshift(0));typeof a._keyframes[c]==="undefined"&&(a._keyframes[c]={});typeof a._originalStates[c]==="undefined"&&(a._originalStates[c]={});a._keyframes[c][g.id]=b;a._originalStates[c][g.id]=d;d=c;a:{for(n=
0;n<a._keyframeIds.length;n++)if(a._keyframeIds[n]===d)break a;a._keyframeIds.push(d);I(a._keyframeIds)}d={add:d};n=a._actorstateIndex[g.id];var f=!1,k;if(typeof d.add!=="undefined"){for(k=0;k<n.length;k++)n[k]===d.add&&(f=!0);f||(n.push(d.add),I(n))}d=g.id;for(var i,j,l,p,E,f=0;f<a._actorstateIndex[d].length;f++){n=a._actorstateIndex[d][f];i=typeof i==="undefined"?h({},a._actors[d].params):h({},j);delete i.data;k=h(i,a._originalStates[n][d],!0);k.prototype=a._actors[d];a._keyframes[n][d]=k;for(l in k)if(k.hasOwnProperty(l)&&
typeof k[l]==="string")if(j&&(E=j[l]),p=k[l].replace(/\s/g,""),A(p)||y(p)){i=k;var m=l;var r=void 0;y(p)||(r=J(p),p="rgb("+r[0]+","+r[1]+","+r[2]+")");i[m]=p}else j&&E&&v(E)&&typeof a._originalStates[n][d][l]==="undefined"&&(k[l]="+=0");i=n;j=k}var t,o;for(o in a._liveCopies)if(a._liveCopies.hasOwnProperty(o))for(t in j=a._liveCopies[o],j)j.hasOwnProperty(t)&&(a._keyframes[t][o]=a._keyframes[a._liveCopies[o][t].copyOf][o]);M();delete b.layer;C();return this};g.to=function(c,b,d){var n=a._actorstateIndex[g.id].queue;
n.push({duration:s(c),state:b||{},events:d||{}});c=x(n);c._internals={};c._internals.startTime=null;c._internals.fromState=null;c._internals.toState=null;c._internals.pauseBuffer=null;c._internals.pauseBufferUpdated=null;return this};g.clearQueue=function(){a._actorstateIndex[g.id].queue.length=1;return this};g.skipToEnd=function(){var c=a._actorstateIndex[g.id].queue;if(!c.length)return this;c[0]._internals.forceStop=!0;return this};g.endCurrentAction=function(){var c=a._actorstateIndex[g.id].queue;
if(!c.length)return this;c[0]._internals.toState=this.getState();this.skipToEnd();return this};g.remove=function(c){var b,d,n,h=!1,c=s(c);if(a._keyframes[c]&&a._keyframes[c][g.id]){delete a._keyframes[c][g.id];delete a._originalStates[c][g.id];for(b in a._keyframes[c])a._keyframes[c].hasOwnProperty(b)&&(h=!0);if(!h&&c!==0){delete a._keyframes[c];delete a._originalStates[c];for(b=0;b<a._keyframeIds.length;b++)if(a._keyframeIds[b]===c){a._keyframeIds.splice(b,1);break}for(b=0;b<a._reachedKeyframes.length;b++)if(a._reachedKeyframes[b]===
c){a._reachedKeyframes.splice(b,1);break}}for(b=0;b<a._actorstateIndex[g.id].length;b++)if(a._actorstateIndex[g.id][b]===c){a._actorstateIndex[g.id].splice(b,1);b<=a._actorstateIndex[g.id].reachedKeyframes.length&&a._actorstateIndex[g.id].reachedKeyframes.pop();break}a._liveCopies[g.id]&&a._liveCopies[g.id].hasOwnProperty(c)&&delete a._liveCopies[g.id][c];for(d in a._liveCopies[g.id])a._liveCopies[g.id].hasOwnProperty(d)&&a._liveCopies[g.id][d].copyOf===c&&(g.remove(d),n=!0);n||delete a._liveCopies[g.id];
C()}else console&&console.error&&(a._keyframes[c]?console.error("Trying to remove "+g.id+" from keyframe "+c+", but "+g.id+" does not exist at that keyframe."):console.error("Trying to remove "+g.id+" from keyframe "+c+", but keyframe "+c+" does not exist."));return this};g.removeAll=function(){for(var c=g.id;a._actorstateIndex[c]&&a._actorstateIndex[c].length;)a._actors[c].remove(x(a._actorstateIndex[c]));return this};g.updateKeyframe=function(c,b){var d,c=s(c);a._keyframes[c]&&a._keyframes[c][g.id]?
(d=a._originalStates[c][g.id],h(d,b,!0),g.keyframe(c,d)):window.console&&window.console.error&&(a._keyframes[c]?console.error("Keyframe "+c+" does not contain "+g.id):console.error("Keyframe "+c+" does not exist."));return this};g.liveCopy=function(c,b){c=s(c);b=s(b);a._keyframes[b]&&a._keyframes[b][g.id]?(a._liveCopies[g.id][c]={copyOf:b},g.keyframe(c,{})):window.console&&window.console.error&&(a._keyframes[b]?console.error("Trying to make a liveCopy of "+b+", but  "+g.id+" does not exist at keyframe "+
c+"."):console.error("Trying to make a liveCopy of "+b+", but keyframe "+b+" does not exist."));return this};g.getState=function(){return a._currentState[g.id]||{}};g.get=function(c){return c.toLowerCase()==="layer"?a._actors[g.id].params.layer:g.getState()[c]};g.moveToLayer=function(c){var b;if(typeof c!=="number")throw"moveToLayer requires a number specifying which layer to move "+this.id+" to.";c=parseInt(c,10);if(c>-1&&c<a._layerIndex.length)b=a._layerIndex.splice(g.params.layer,1)[0],a._layerIndex.splice(c,
0,b),M();else throw'"'+c+'" is out of bounds.  There are only '+a._layerIndex.length+" layers in the animation, "+g.id+" can only be moved to layers 0-"+a._layerIndex.length;return g};g.data=function(a){if(a)g.params.data=a;return g.params.data};g.kapi=m;return g}function z(g){var c;if(typeof g==="string"&&a._events[g])for(c=0;c<a._events[g].length;c++)a._events[g][c].call(a)}function N(g,c,b,d,n,f){var e,k,i,j,l,p,m,u={},n=kapi.tween[n]?n:"linear",f=f||{};for(k in g)if(g.hasOwnProperty(k)){i=g[k];
j=g.prototype.id;if(typeof i==="object"&&k!=="prototype")for(m in i)if(i.hasOwnProperty(m)){i=i[m];break}if(typeof a._keyframeCache[j].from[k]!=="undefined")i=a._keyframeCache[j].from[k];else if(v(i)){i=g.prototype.id;e=k;var r=p=l=void 0,t=[],o=r=void 0,s=void 0,o=void 0;l=w(a._actorstateIndex[i]);p=a._actorstateIndex[i];for(o=l;o>=0;o--)r=a._keyframes[p[o]][i][e],t.unshift(r),v(r)||(o=-2);o>-2&&t.unshift(a._actors[i].params[e]);for(r=t.shift();t.length;)o=t.shift(),typeof o==="function"?r=o.call(a._keyframes[p[l]][i])||
0:(s=o.match(/(\+|\-|\*|\/)\=/)[0],r=O[s](r,+o.replace(D,"")));i=r;a._keyframeCache[j].from[k]=i}if(typeof i==="number"||v(i)||A(i)||y(i)){e=!1;j=c[k];l=c.prototype.id;if(typeof j==="object"&&k!=="prototype")for(m in j)if(j.hasOwnProperty(m)){n=kapi.tween[m]?m:"linear";j=j[m];break}typeof a._keyframeCache[l].to[k]!=="undefined"?j=a._keyframeCache[l].to[k]:v(j)&&(typeof j==="function"?j=j.call(c)||0:(p=j.match(/(\+|\-|\*|\/)\=/)[0],j=O[p](i,+j.replace(D,""))),a._keyframeCache[l].to[k]=j);l=typeof i;
if(!(typeof j==="number"||v(j)||A(j)||y(j))||l!==typeof j)u[k]=i;else if(typeof i==="string"&&(e=!0,i=K(i),j=K(j)),e){u[k]="rgb(";for(e=0;e<i.length;e++)u[k]+=Math.floor(G.call(this,n,b,d,i[e],j[e],f.currentFrame))+",";u[k]=u[k].replace(/,$/,")")}else u[k]=G.call(this,n,b,d,i,j,f.currentFrame)}}h(u,g);return u}function F(g){var c,b,d,e,f,q,k;for(k=0;k<a._layerIndex.length;k++){c=a._layerIndex[k];if(typeof a._actorstateIndex[c][0]!=="undefined"&&g>=a._actorstateIndex[c][0]){b=c;e=a._actorstateIndex[b];
f=w(e);var i=q=d=void 0,j=void 0;if(f===-1)b=null;else if(d=f===e.length-1?f:f+1,q=a._keyframes[e[f]][b],i=a._keyframes[e[d]][b],f===d&&a._lastKeyframe>0)b=null;else{j=x(a._actorstateIndex[b].reachedKeyframes)||0;if(!a._keyframeCache[b])a._keyframeCache[b]={from:{},to:{}},a._actorstateIndex[b].reachedKeyframes=[];f!==j&&f>j&&(a._actorstateIndex[b].reachedKeyframes.push(f),a._keyframeCache[b]={from:a._keyframeCache[b].to,to:{}});b=N(q,i,e[f],e[d],i.easing)}if(b!==null){e=a._actorstateIndex[c].queue;
if((f=e.length)>0){q=e[0];d=q.events;typeof d.start==="function"&&(d.start.call(a._actors[c]),delete d.start);if(q._internals.fromState===null)q._internals.fromState=b;d=e;q=c;var i=+new Date,j=d[0],l=j._internals,p=void 0;if(l.startTime===null)l.startTime=i;if(!l.pauseBufferUpdated)l.pauseBufferUpdated=i;if(l.pauseBufferUpdated<a._pausedAtTime)l.pauseBuffer+=i-a._pausedAtTime,l.pauseBufferUpdated=i;if(l.toState===null)l.toState={},h(l.toState,l.fromState),h(l.toState,j.state,!0);l.currFrame=l.forceStop?
j.duration+1:(i-(l.startTime+l.pauseBuffer))/1E3*a._params.fps;if(l.currFrame>j.duration)p=j.events.complete,typeof p==="function"&&p.call(a._actors[q]),d.shift();d=N(l.fromState,l.toState,0,+j.duration,j.easing||l.fromState.easing,{currentFrame:l.currFrame});h(b,d,!0);f!==e.length&&(e=w(a._actorstateIndex[c]),a._keyframes[a._keyframeIds[e]][c]=b)}b.prototype.draw.call(b,a.ctx,m,b.prototype)}}a._currentState[c]=b}}function P(){var b=+new Date;a.frameCount++;a._updateHandle=setTimeout(function(){var c;
a._loopLength=b-a._loopStartTime;if(a._loopLength>a._animationDuration&&a._reachedKeyframes.length===a._keyframeIds.length){a._loopStartTime=a._startTime+parseInt((b-a._startTime)/(a._animationDuration||1),10)*a._animationDuration;a._loopLength-=a._animationDuration||a._loopLength;a._reachedKeyframes=[];a._keyframeCache={};z("loopComplete");if(a._repsRemaining>-1&&(a._repsRemaining--,a._repsRemaining===0)){m.stop();a._currentFrame=a._lastKeyframe;m.clear();m.redraw();a._params.clearOnComplete===!0&&
m.clear();if(typeof a._repeatCompleteHandler==="function")a._repeatCompleteHandler.call(a),a._repeatCompleteHandler=void 0;a._repsRemaining=-1;return}z("loopStart")}a._loopPosition=a._animationDuration?a._loopLength/a._animationDuration:0;a._currentFrame=parseInt(a._loopPosition*a._lastKeyframe,10);c=w(a._keyframeIds);c=c===-1?a._lastKeyframe:a._keyframeIds[c];c>(x(a._reachedKeyframes)||0)&&a._reachedKeyframes.push(c);c=a._reachedKeyframes.length?a._reachedKeyframes.length-1:0;if(a._reachedKeyframes[c]!==
a._keyframeIds[c])a._currentFrame=a._reachedKeyframes[c]=a._keyframeIds[c];a._currentFrame<=a._lastKeyframe&&(a.autoclear!==!1&&m.clear(),z("enterFrame"),F(a._currentFrame));P()},1E3/a._params.fps);return a._updateHandle}var S={fps:20,autoclear:!0,clearOnStop:!1,clearOnComplete:!1},m={},a={_events:{},_keyframeIds:[],_reachedKeyframes:[],_layerIndex:[],_keyframes:{},_actors:{},_actorstateIndex:{},_keyframeCache:{},_originalStates:{},_liveCopies:{},_currentState:{},_animationDuration:0,_repsRemaining:-1,
_lastKeyframe:void 0,_currentFrame:void 0,_loopStartTime:void 0,_startTime:void 0,_pausedAtTime:void 0,_isPaused:void 0,_isStopped:void 0,_loopLength:void 0,_loopPosition:void 0,_updateHandle:void 0,_repeatCompleteHandler:void 0,frameCount:0},Q=Object.prototype.toString,D=/(\+|\-|=|\*|\/)/g,L={ms:function(b){return b*a._params.fps/1E3},s:function(b){return b*a._params.fps}},O={"+=":function(a,b){return a+b},"-=":function(a,b){return a-b},"*=":function(a,b){return a*b},"/=":function(a,b){return a/
b}},m={init:function(b,c,e){var d,f,c=c||{},e=e||{};h(c,S);a._params=c;a.autoclear=!!a._params.autoclear;a._params.canvas=b;a.el=b;a.ctx=b.getContext("2d");for(f in e)e.hasOwnProperty(f)&&this.bind(f,e[f]);for(d in a._params.styles)if(a._params.styles.hasOwnProperty(d)){a._params.styles[d]=a._params.styles[d].toString().toLowerCase();if(d==="height"||d==="width"||d==="top"||d==="left")a._params.styles[d].match(/px/)||(a._params.styles[d]+="px");b=a.el.style;c=d;e=a._params.styles[d];typeof e==="string"&&
(e=e.replace(/\s/g,""));b[c]=e}a._params.styles&&(a._params.styles.height&&H.call(a.el,"height"),a._params.styles.width&&H.call(a.el,"width"));delete this.init;return this},getVersion:function(){return"1.0.5"},getContext:function(){return a.ctx},isPlaying:function(){return a._isStopped===!1&&a._isPaused===!1},play:function(){var b;b=+new Date;if(this.isPlaying())return this;a._isStopped=a._isPaused=!1;if(!a._startTime)a._startTime=b;a._loopStartTime?(b-=a._pausedAtTime,a._loopStartTime+=b,a._startTime+=
b):(a._loopStartTime=b,C(),z("loopStart"));P();return this},pause:function(){clearTimeout(a._updateHandle);a._pausedAtTime=+new Date;a._isPaused=!0;return this},stop:function(){var b;clearTimeout(a._updateHandle);delete a._loopStartTime;delete a._startTime;delete a._pausedAtTime;a._isStopped=!0;a._repsRemaining=-1;a._keyframeCache={};for(b in a._actorstateIndex)if(a._actorstateIndex.hasOwnProperty(b))a._actorstateIndex[b].queue=[],a._actorstateIndex[b].reachedKeyframes=[];a._params.clearOnStop===
!0&&m.clear();return this},clear:function(){a.ctx.clearRect(0,0,a.el.width,a.el.height);return this},redraw:function(){F(a._currentFrame);return this},repeat:function(b,c){typeof b==="number"&&b>=-1?(a._repeatCompleteHandler=c,a._repsRemaining=parseInt(b,10)+1):a._repsRemaining=-1;return this.play()},iterate:function(a,b){typeof a==="number"&&a>=-1&&this.repeat(a-1,b);return this.play()},add:function(b,c,e){var d={},f=["setup","draw","teardown"],h,m=function(){return function(){}};if(b instanceof
Function)d={setup:function(){},draw:b,teardown:function(){}};else if(b instanceof Object){b.draw instanceof Function||console&&console.error&&console.error("Trying to add an Object as an actor, but it does not have a draw function.");for(h=0;h<f.length;h++)d[f[h]]=b[f[h]]instanceof Function?b[f[h]]:m()}else{console&&console.error&&console.error(b+" is not a valid actor Object.");return}d.params=c;d.params.data=d.params.data||{};d.constructor=b.draw;if(typeof d.id==="undefined")d.id=d.params.id||d.params.name||
parseInt(Math.random().toString().substr(2),10)+ +new Date;delete d.params.name;if(typeof a._actorstateIndex[d.id]==="undefined")a._actorstateIndex[d.id]=[],a._actorstateIndex[d.id].queue=[],a._actorstateIndex[d.id].reachedKeyframes=[];a._actors[d.id]=d;a._liveCopies[d.id]={};a._layerIndex.push(d.id);d.params.layer=a._layerIndex.length-1;d=R(d);d.setup.apply(d,[this].concat(e||[]));delete d.setup;return d},removeActor:function(b){var c,e,d;if(typeof b==="string"&&a._actors[b]){c=a._actors[b];e=a._actorstateIndex[b].slice(0);
for(d=0;d<e.length;d++)c.remove(e[d]);delete a._actorstateIndex[b];delete a._currentState[b];for(d=0;d<a._layerIndex.length;d++)if(a._layerIndex[d]===b){a._layerIndex.splice(d,1);break}c=c.teardown;delete a._actors[b];c(b)}else console&&console.error&&console.error(b," is not a valid actor ID.");return this},getActor:function(b){return a._actors[b]},getActorList:function(){var b=[],c;for(c in a._actors)a._actors.hasOwnProperty(c)&&b.push(c);return b},removeAllKeyframes:function(){for(var b in a._actors)a._actors.hasOwnProperty(b)&&
a._actors[b].removeAll();return this},framerate:function(b){var c,e={},d={},f={},m,q,k,i;if(b&&typeof b==="number"&&b>0){c=a._params.fps;c=b/c;a._params.fps=parseInt(b,10);h(e,a._actorstateIndex);h(d,a._originalStates);h(f,a._liveCopies);b=a._reachedKeyframes.slice(0);this.removeAllKeyframes();for(m in e)if(e.hasOwnProperty(m)){for(i=e[m].length-1;i>-1;i--)a._actors[m].keyframe(c*e[m][i],d[e[m][i]][m]);for(i=0;i<e[m].queue.length;i++)a._actorstateIndex[m].queue[i].duration*=c;a._actorstateIndex[m].reachedKeyframes=
e[m].reachedKeyframes.splice(0)}for(k in f)if(f.hasOwnProperty(k))for(q in a._liveCopies[k]={},f[k])f[k].hasOwnProperty(q)&&a._actors[k].liveCopy(+q*c,f[k][q].copyOf);for(i=0;i<b.length;i++)a._reachedKeyframes[i]=b[i]*c}return a._params.fps},gotoFrame:function(b){var c=+new Date,e;this.isPlaying()&&this.stop();b=s(b)%a._lastKeyframe;a._currentFrame=b;a._loopStartTime=a._startTime=c-b*(1E3/a._params.fps);a._pausedAtTime=c;a._reachedKeyframes=a._keyframeIds.slice(0,w(a._keyframeIds)+1);a._keyframeCache=
{};m.clear();for(e in a._actors)a._actors.hasOwnProperty(e)&&(a._keyframeCache[e]={from:{},to:{}},a._actorstateIndex[e].reachedKeyframes.push(w(a._actorstateIndex[e])));F(a._currentFrame);return this},gotoAndPlay:function(a){this.gotoFrame(a);return this.play()},getNumberOfLayers:function(){return a._layerIndex.length},getState:function(){return a._currentState},bind:function(b,c){typeof b==="string"&&typeof c==="function"&&(a._events[b]||(a._events[b]=[]),a._events[b].push(c));return this},unbind:function(b,
c){var e;if(typeof b==="string"&&a._events[b])if(typeof c==="function")for(e=0;e<a._events[b].length;e++)a._events[b][e]===c&&a._events[b].splice(e,1);else a._events[b]=[];return this},_debug:function(){return a}};return m.init(b,f,e)}kapi.actorTemplates={};kapi.tween={linear:function(b,f,e,h){return e*b/h+f}};kapi.tween.easeInQuad=function(b,f,e,h){b/=h;return e*b*b+f};kapi.tween.easeOutQuad=function(b,f,e,h){b/=h;return-e*b*(b-2)+f};
kapi.tween.easeInOutQuad=function(b,f,e,h){b/=h/2;if(b<1)return e/2*b*b+f;b--;return-e/2*(b*(b-2)-1)+f};kapi.tween.easeInCubic=function(b,f,e,h){b/=h;return e*b*b*b+f};kapi.tween.easeOutCubic=function(b,f,e,h){b/=h;b--;return e*(b*b*b+1)+f};kapi.tween.easeInOutCubic=function(b,f,e,h){b/=h/2;if(b<1)return e/2*b*b*b+f;b-=2;return e/2*(b*b*b+2)+f};kapi.tween.easeInQuart=function(b,f,e,h){b/=h;return e*b*b*b*b+f};kapi.tween.easeOutQuart=function(b,f,e,h){b/=h;b--;return-e*(b*b*b*b-1)+f};
kapi.tween.easeInOutQuart=function(b,f,e,h){b/=h/2;if(b<1)return e/2*b*b*b*b+f;b-=2;return-e/2*(b*b*b*b-2)+f};kapi.tween.easeInQuint=function(b,f,e,h){b/=h;return e*b*b*b*b*b+f};kapi.tween.easeOutQuint=function(b,f,e,h){b/=h;b--;return e*(b*b*b*b*b+1)+f};kapi.tween.easeInOutQuint=function(b,f,e,h){b/=h/2;if(b<1)return e/2*b*b*b*b*b+f;b-=2;return e/2*(b*b*b*b*b+2)+f};kapi.tween.easeInSine=function(b,f,e,h){return-e*Math.cos(b/h*(Math.PI/2))+e+f};
kapi.tween.easeOutSine=function(b,f,e,h){return e*Math.sin(b/h*(Math.PI/2))+f};kapi.tween.easeInOutSine=function(b,f,e,h){return-e/2*(Math.cos(Math.PI*b/h)-1)+f};kapi.tween.easeInExpo=function(b,f,e,h){return e*Math.pow(2,10*(b/h-1))+f};kapi.tween.easeOutExpo=function(b,f,e,h){return e*(-Math.pow(2,-10*b/h)+1)+f};kapi.tween.easeInOutExpo=function(b,f,e,h){b/=h/2;if(b<1)return e/2*Math.pow(2,10*(b-1))+f;b--;return e/2*(-Math.pow(2,-10*b)+2)+f};
kapi.tween.easeInCirc=function(b,f,e,h){b/=h;return-e*(Math.sqrt(1-b*b)-1)+f};kapi.tween.easeOutCirc=function(b,f,e,h){b/=h;b--;return e*Math.sqrt(1-b*b)+f};kapi.tween.easeInOutCirc=function(b,f,e,h){b/=h/2;if(b<1)return-e/2*(Math.sqrt(1-b*b)-1)+f;b-=2;return e/2*(Math.sqrt(1-b*b)+1)+f};